
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>xdllib.steps.steps_xdl &#8212; xdl 0.1.0 documentation</title>
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for xdllib.steps.steps_xdl</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">..constants</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">..utils</span> <span class="k">import</span> <span class="n">Step</span><span class="p">,</span> <span class="n">filter_bottom_name</span><span class="p">,</span> <span class="n">filter_top_name</span><span class="p">,</span> <span class="n">is_generic_filter_name</span><span class="p">,</span> <span class="n">separator_bottom_name</span><span class="p">,</span> <span class="n">separator_top_name</span><span class="p">,</span> <span class="n">is_generic_separator_name</span>
<span class="kn">from</span> <span class="nn">.steps_chasm</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">CMove</span><span class="p">,</span>
    <span class="n">CSeparate</span><span class="p">,</span>
    <span class="n">CPrime</span><span class="p">,</span>
    <span class="n">CSwitchVacuum</span><span class="p">,</span>
    <span class="n">CSwitchCartridge</span><span class="p">,</span>
    <span class="n">CSwitchColumn</span><span class="p">,</span>
    <span class="n">CStartStir</span><span class="p">,</span>
    <span class="n">CStartHeat</span><span class="p">,</span>
    <span class="n">CStopStir</span><span class="p">,</span>
    <span class="n">CStopHeat</span><span class="p">,</span>
    <span class="n">CSetTemp</span><span class="p">,</span>
    <span class="n">CSetStirRpm</span><span class="p">,</span>
    <span class="n">CStirrerWaitForTemp</span><span class="p">,</span>
    <span class="n">CStartHeaterBath</span><span class="p">,</span>
    <span class="n">CStopHeaterBath</span><span class="p">,</span>
    <span class="n">CStartRotation</span><span class="p">,</span>
    <span class="n">CStopRotation</span><span class="p">,</span>
    <span class="n">CLiftArmUp</span><span class="p">,</span>
    <span class="n">CLiftArmDown</span><span class="p">,</span>
    <span class="n">CResetRotavap</span><span class="p">,</span>
    <span class="n">CSetBathTemp</span><span class="p">,</span>
    <span class="n">CSetRvRotationSpeed</span><span class="p">,</span>
    <span class="n">CRvWaitForTemp</span><span class="p">,</span>
    <span class="n">CSetInterval</span><span class="p">,</span>
    <span class="n">CInitVacPump</span><span class="p">,</span>
    <span class="n">CGetVacSp</span><span class="p">,</span>
    <span class="n">CSetVacSp</span><span class="p">,</span>
    <span class="n">CStartVac</span><span class="p">,</span>
    <span class="n">CStopVac</span><span class="p">,</span>
    <span class="n">CVentVac</span><span class="p">,</span>
    <span class="n">CSetSpeedSp</span><span class="p">,</span>
    <span class="n">CStartChiller</span><span class="p">,</span>
    <span class="n">CStopChiller</span><span class="p">,</span>
    <span class="n">CSetChiller</span><span class="p">,</span>
    <span class="n">CChillerWaitForTemp</span><span class="p">,</span>
    <span class="n">CRampChiller</span><span class="p">,</span>
    <span class="n">CSwitchChiller</span><span class="p">,</span>
    <span class="n">CSetCoolingPower</span><span class="p">,</span>
    <span class="n">CSetRecordingSpeed</span><span class="p">,</span>
    <span class="n">CWait</span><span class="p">,</span>
    <span class="n">CBreakpoint</span><span class="p">,</span>
<span class="p">)</span>

<div class="viewcode-block" id="StartStir"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.StartStir">[docs]</a><span class="k">class</span> <span class="nc">StartStir</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Start stirring given vessel.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        vessel {str} -- Vessel name to stir.</span>
<span class="sd">        stir_rpm {int} -- Speed in RPM to stir at. (optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stir_rpm</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;StartStir&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;vessel&#39;</span><span class="p">:</span> <span class="n">vessel</span><span class="p">,</span>
            <span class="s1">&#39;stir_rpm&#39;</span><span class="p">:</span> <span class="n">stir_rpm</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_defaults</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">CStartStir</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">vessel</span><span class="p">),</span>
            <span class="n">CSetStirRpm</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">vessel</span><span class="p">,</span> <span class="n">stir_rpm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stir_rpm</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Set stir rate to </span><span class="si">{stir_rpm}</span><span class="s1"> RPM and start stirring </span><span class="si">{vessel}</span><span class="s1">.&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span>

    <span class="nd">@vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">stir_rpm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;stir_rpm&#39;</span><span class="p">]</span>

    <span class="nd">@stir_rpm</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">stir_rpm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;stir_rpm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="StartHeat"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.StartHeat">[docs]</a><span class="k">class</span> <span class="nc">StartHeat</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Start heating given vessel at given temperature.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        vessel {str} -- Vessel name to heat.</span>
<span class="sd">        temp {float} -- Temperature to heat to in °C.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">temp</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;StartHeat&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;vessel&#39;</span><span class="p">:</span> <span class="n">vessel</span><span class="p">,</span>
            <span class="s1">&#39;temp&#39;</span><span class="p">:</span> <span class="n">temp</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">CSetTemp</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">,</span> <span class="n">temp</span><span class="o">=</span><span class="n">temp</span><span class="p">),</span>
            <span class="n">CStartHeat</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Heat </span><span class="si">{vessel}</span><span class="s1"> to </span><span class="si">{temp}</span><span class="s1"> °C&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span>

    <span class="nd">@vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">temp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;temp&#39;</span><span class="p">]</span>

    <span class="nd">@temp</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">temp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;temp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="StartVacuum"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.StartVacuum">[docs]</a><span class="k">class</span> <span class="nc">StartVacuum</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Start vacuum pump attached to given vessel.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        vessel {str} -- Vessel name to start vacuum on.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;StartVacuum&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;vessel&#39;</span><span class="p">:</span> <span class="n">vessel</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">CSwitchVacuum</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="s1">&#39;vacuum&#39;</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Start vacuum for </span><span class="si">{vessel}</span><span class="s1">.&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span>

    <span class="nd">@vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="StopVacuum"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.StopVacuum">[docs]</a><span class="k">class</span> <span class="nc">StopVacuum</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Stop vacuum pump attached to given vessel.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        vessel {str} -- Vessel name to stop vacuum on.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;StopVacuum&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;vessel&#39;</span><span class="p">:</span> <span class="n">vessel</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">CSwitchVacuum</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="s1">&#39;backbone&#39;</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Stop vacuum for </span><span class="si">{vessel}</span><span class="s1">.&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span>

    <span class="nd">@vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="CleanVessel"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.CleanVessel">[docs]</a><span class="k">class</span> <span class="nc">CleanVessel</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Clean given vessel.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        vessel {str} -- Vessel to clean.</span>
<span class="sd">        solvent {str} -- Solvent to clean with. (optional)</span>
<span class="sd">        volume {str} -- Volume of solvent to clean with in mL. (optional)</span>
<span class="sd">        stir_rpm {str} -- RPM to stir vessel at during cleaning. (optional)</span>
<span class="sd">        stir_time {str} -- Time to stir once solvent has been added. (optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">solvent</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="n">stir_rpm</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span>
                    <span class="n">stir_time</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="n">waste_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;CleanVessel&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;vessel&#39;</span><span class="p">:</span> <span class="n">vessel</span><span class="p">,</span>
            <span class="s1">&#39;solvent&#39;</span><span class="p">:</span> <span class="n">solvent</span><span class="p">,</span>
            <span class="s1">&#39;volume&#39;</span><span class="p">:</span> <span class="n">volume</span><span class="p">,</span>
            <span class="s1">&#39;stir_rpm&#39;</span><span class="p">:</span> <span class="n">stir_rpm</span><span class="p">,</span>
            <span class="s1">&#39;waste_vessel&#39;</span><span class="p">:</span> <span class="n">waste_vessel</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_defaults</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">CMove</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">f</span><span class="s1">&#39;flask_</span><span class="si">{solvent}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="n">f</span><span class="s2">&quot;</span><span class="si">{vessel}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">volume</span><span class="p">),</span>
            <span class="n">Wait</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">60</span><span class="p">),</span>
            <span class="n">CMove</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Clean </span><span class="si">{vessel}</span><span class="s1"> with </span><span class="si">{solvent}</span><span class="s1"> (</span><span class="si">{volume}</span><span class="s1">).</span><span class="se">\n</span><span class="s1">&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span>

    <span class="nd">@vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">solvent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solvent&#39;</span><span class="p">]</span>

    <span class="nd">@solvent</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">solvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solvent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">volume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;volume&#39;</span><span class="p">]</span>

    <span class="nd">@volume</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">volume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;volume&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">stir_rpm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;stir_rpm&#39;</span><span class="p">]</span>

    <span class="nd">@stir_rpm</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">stir_rpm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;stir_rpm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">waste_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@waste_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">waste_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="CleanBackbone"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.CleanBackbone">[docs]</a><span class="k">class</span> <span class="nc">CleanBackbone</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reagent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">waste_vessels</span><span class="o">=</span><span class="p">[]):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;CleanBackbone&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;reagent&#39;</span><span class="p">:</span> <span class="n">reagent</span><span class="p">,</span>
            <span class="s1">&#39;waste_vessels&#39;</span><span class="p">:</span> <span class="n">waste_vessels</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">waste_vessel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">waste_vessels</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CMove</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">f</span><span class="s1">&#39;flask_</span><span class="si">{self.reagent}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="n">waste_vessel</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="n">DEFAULT_CLEAN_BACKBONE_VOLUME</span><span class="p">,</span> <span class="n">aspiration_speed</span><span class="o">=</span><span class="mi">30</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Clean backbone with </span><span class="si">{self.reagent}</span><span class="s1">.&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">reagent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;reagent&#39;</span><span class="p">]</span>

    <span class="nd">@reagent</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">reagent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;reagent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">waste_vessels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_vessels&#39;</span><span class="p">]</span>

    <span class="nd">@waste_vessels</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">waste_vessels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_vessels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="HeatAndReact"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.HeatAndReact">[docs]</a><span class="k">class</span> <span class="nc">HeatAndReact</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Under stirring, heat given vessel to given temp and wait for given time</span>
<span class="sd">     then stop heat and stirring.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        vessel {str} -- Vessel to heat.</span>
<span class="sd">        time {float} -- Time to leave vessel under heating/stirring in seconds.</span>
<span class="sd">        temp {float} -- Temperature to heat to in °C.</span>
<span class="sd">        stir_rpm {int} -- RPM to stir at. (optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">temp</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stir_rpm</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;HeatAndReact&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;vessel&#39;</span><span class="p">:</span> <span class="n">vessel</span><span class="p">,</span>
            <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">time</span><span class="p">,</span>
            <span class="s1">&#39;temp&#39;</span><span class="p">:</span> <span class="n">temp</span><span class="p">,</span>
            <span class="s1">&#39;stir_rpm&#39;</span><span class="p">:</span> <span class="n">stir_rpm</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">StartHeat</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">,</span> <span class="n">temp</span><span class="o">=</span><span class="n">temp</span><span class="p">),</span>
            <span class="n">Wait</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">),</span>
            <span class="n">CStopHeat</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Heat </span><span class="si">{vessel}</span><span class="s1"> to </span><span class="si">{temp}</span><span class="s1"> °C under stirring and wait {float(time) / 3600} hrs.</span><span class="se">\n</span><span class="s1">Then stop heating and continue stirring until </span><span class="si">{vessel}</span><span class="s1"> reaches room temperature.&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span>

    <span class="nd">@vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span>

    <span class="nd">@time</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">temp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;temp&#39;</span><span class="p">]</span>

    <span class="nd">@temp</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">temp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;temp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">stir_rpm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;stir_rpm&#39;</span><span class="p">]</span>

    <span class="nd">@stir_rpm</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">stir_rpm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;stir_rpm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="ContinueStirToRT"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.ContinueStirToRT">[docs]</a><span class="k">class</span> <span class="nc">ContinueStirToRT</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set vessel temperature to room temperature, and continue stirring until</span>
<span class="sd">    this temperature is reached, then stop stirring. Assumes stirrer is already on.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        vessel {str} -- Vessel to continue stirring until room temperature is reached.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;StirToRT&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;vessel&#39;</span><span class="p">:</span> <span class="n">vessel</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">CSetTemp</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">,</span> <span class="n">temp</span><span class="o">=</span><span class="n">ROOM_TEMPERATURE</span><span class="p">),</span>
            <span class="n">CStirrerWaitForTemp</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">),</span>
            <span class="n">CStopStir</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Wait for </span><span class="si">{vessel}</span><span class="s1"> to reach room temperature and then stop stirring.&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span>

    <span class="nd">@vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="StopChiller"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.StopChiller">[docs]</a><span class="k">class</span> <span class="nc">StopChiller</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Stop the chiller.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        vessel {str} -- Vessel to stop chiller for.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;StopChiller&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;vessel&#39;</span><span class="p">:</span> <span class="n">vessel</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">is_generic_filter_name</span><span class="p">(</span><span class="n">vessel</span><span class="p">):</span>
            <span class="n">vessel</span> <span class="o">=</span> <span class="n">filter_top_name</span><span class="p">(</span><span class="n">vessel</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">CSetChiller</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">,</span> <span class="n">temp</span><span class="o">=</span><span class="n">ROOM_TEMPERATURE</span><span class="p">),</span>
            <span class="n">CChillerWaitForTemp</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">),</span>
            <span class="n">CStopChiller</span><span class="p">(</span><span class="n">vessel</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Stop chiller for </span><span class="si">{self.vessel}</span><span class="s1">&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span>

    <span class="nd">@vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="Chill"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.Chill">[docs]</a><span class="k">class</span> <span class="nc">Chill</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Chill vessel to given temperature.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        vessel {str} -- Vessel name to chill.</span>
<span class="sd">        temp {float} -- Temperature in °C to chill to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">temp</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Chill&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;vessel&#39;</span><span class="p">:</span> <span class="n">vessel</span><span class="p">,</span>
            <span class="s1">&#39;temp&#39;</span><span class="p">:</span> <span class="n">temp</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">is_generic_filter_name</span><span class="p">(</span><span class="n">vessel</span><span class="p">):</span>
            <span class="n">vessel</span> <span class="o">=</span> <span class="n">filter_top_name</span><span class="p">(</span><span class="n">vessel</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
            <span class="n">CSetChiller</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">,</span> <span class="n">temp</span><span class="o">=</span><span class="n">temp</span><span class="p">),</span>
            <span class="n">CStartChiller</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">),</span>
            <span class="n">CChillerWaitForTemp</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">),</span>
        <span class="p">])</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Chill </span><span class="si">{vessel}</span><span class="s1"> to </span><span class="si">{temp}</span><span class="s1"> °C.&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span>

    <span class="nd">@vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">temp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;temp&#39;</span><span class="p">]</span>

    <span class="nd">@temp</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">temp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;temp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="ChillBackToRT"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.ChillBackToRT">[docs]</a><span class="k">class</span> <span class="nc">ChillBackToRT</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Chill given vessel back to room temperature.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        vessel {str} -- Vessel name to chill.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;ChillBackToRT&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;vessel&#39;</span><span class="p">:</span> <span class="n">vessel</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">is_generic_filter_name</span><span class="p">(</span><span class="n">vessel</span><span class="p">):</span>
            <span class="n">vessel</span> <span class="o">=</span> <span class="n">filter_top_name</span><span class="p">(</span><span class="n">vessel</span><span class="p">)</span>

        <span class="c1"># This is dodgy. Ideally will track which vessels have chillers.</span>
        <span class="k">if</span> <span class="n">vessel</span> <span class="ow">and</span> <span class="s1">&#39;filter&#39;</span> <span class="ow">in</span> <span class="n">vessel</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">CSetChiller</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">,</span> <span class="n">temp</span><span class="o">=</span><span class="n">ROOM_TEMPERATURE</span><span class="p">),</span>
                <span class="n">CChillerWaitForTemp</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">),</span>
                <span class="n">CStopChiller</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">CSetTemp</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">vessel</span><span class="p">,</span> <span class="n">temp</span><span class="o">=</span><span class="n">ROOM_TEMPERATURE</span><span class="p">),</span>
                <span class="n">CStirrerWaitForTemp</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">vessel</span><span class="p">),</span>
            <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Chill </span><span class="si">{vessel}</span><span class="s1"> to room temperature.&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span>

    <span class="nd">@vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="PrimePumpForAdd"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.PrimePumpForAdd">[docs]</a><span class="k">class</span> <span class="nc">PrimePumpForAdd</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Prime pump attached to given reagent flask in anticipation of Add step.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        reagent {str} -- Reagent to prime pump for addition.</span>
<span class="sd">        move_speed {str} -- Speed to move reagent at. (optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reagent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="n">waste_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">move_speed</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;PrimePumpForAdd&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;reagent&#39;</span><span class="p">:</span> <span class="n">reagent</span><span class="p">,</span>
            <span class="s1">&#39;waste_vessel&#39;</span><span class="p">:</span> <span class="n">waste_vessel</span><span class="p">,</span>
            <span class="s1">&#39;move_speed&#39;</span><span class="p">:</span> <span class="n">move_speed</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">CMove</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">f</span><span class="s2">&quot;flask_</span><span class="si">{reagent}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">,</span>
                    <span class="n">volume</span><span class="o">=</span><span class="n">DEFAULT_PUMP_PRIME_VOLUME</span><span class="p">,</span> <span class="n">move_speed</span><span class="o">=</span><span class="n">move_speed</span><span class="p">)</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">reagent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;reagent&#39;</span><span class="p">]</span>

    <span class="nd">@reagent</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">reagent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;reagent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">waste_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@waste_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">waste_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">move_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;move_speed&#39;</span><span class="p">]</span>

    <span class="nd">@move_speed</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">move_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;move_speed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="Add"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.Add">[docs]</a><span class="k">class</span> <span class="nc">Add</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add given volume of given reagent to given vessel.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        reagent {str} -- Reagent to add.</span>
<span class="sd">        volume {float} -- Volume of reagent to add.</span>
<span class="sd">        vessel {str} -- Vessel name to add reagent to.</span>
<span class="sd">        time {float} -- Time to spend doing addition in seconds. (optional)</span>
<span class="sd">        move_speed {float} -- Speed in mL / min to move liquid at. (optional)</span>
<span class="sd">        clean_tubing {bool} -- Clean tubing before and after addition. (optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reagent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">move_speed</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="n">waste_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Add&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;reagent&#39;</span><span class="p">:</span> <span class="n">reagent</span><span class="p">,</span>
            <span class="s1">&#39;volume&#39;</span><span class="p">:</span> <span class="n">volume</span><span class="p">,</span>
            <span class="s1">&#39;vessel&#39;</span><span class="p">:</span> <span class="n">vessel</span><span class="p">,</span>
            <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">time</span><span class="p">,</span>
            <span class="s1">&#39;move_speed&#39;</span><span class="p">:</span> <span class="n">move_speed</span><span class="p">,</span>
            <span class="s1">&#39;waste_vessel&#39;</span><span class="p">:</span> <span class="n">waste_vessel</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_defaults</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">is_generic_filter_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vessel</span><span class="p">):</span>
            <span class="n">vessel</span> <span class="o">=</span> <span class="n">filter_top_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vessel</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">PrimePumpForAdd</span><span class="p">(</span><span class="n">reagent</span><span class="o">=</span><span class="n">reagent</span><span class="p">,</span> <span class="n">waste_vessel</span><span class="o">=</span><span class="n">waste_vessel</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CMove</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">f</span><span class="s2">&quot;flask_</span><span class="si">{reagent}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">,</span>
                            <span class="n">volume</span><span class="o">=</span><span class="n">volume</span><span class="p">,</span> <span class="n">move_speed</span><span class="o">=</span><span class="n">move_speed</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Wait</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">DEFAULT_AFTER_ADD_WAIT_TIME</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Add </span><span class="si">{reagent}</span><span class="s1"> (</span><span class="si">{volume}</span><span class="s1"> mL) to </span><span class="si">{vessel}</span><span class="s1">&#39;</span> <span class="c1"># Maybe add in bit for clean tubing</span>
        <span class="k">if</span> <span class="n">time</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">+=</span> <span class="n">f</span><span class="s1">&#39; over </span><span class="si">{time}</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">+=</span> <span class="s1">&#39;.&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">reagent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;reagent&#39;</span><span class="p">]</span>

    <span class="nd">@reagent</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">reagent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;reagent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">volume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;volume&#39;</span><span class="p">]</span>

    <span class="nd">@volume</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">volume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;volume&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span>

    <span class="nd">@vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span>

    <span class="nd">@time</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">move_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;move_speed&#39;</span><span class="p">]</span>

    <span class="nd">@move_speed</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">move_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;move_speed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">waste_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@waste_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">waste_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="Transfer"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.Transfer">[docs]</a><span class="k">class</span> <span class="nc">Transfer</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Transfer contents of one vessel to another.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        from_vessel {str} -- Vessel name to transfer from.</span>
<span class="sd">        to_vessel {str} -- Vessel name to transfer to.</span>
<span class="sd">        volume {float} -- Volume to transfer in mL.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Transfer&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;from_vessel&#39;</span><span class="p">:</span> <span class="n">from_vessel</span><span class="p">,</span>
            <span class="s1">&#39;to_vessel&#39;</span><span class="p">:</span> <span class="n">to_vessel</span><span class="p">,</span>
            <span class="s1">&#39;volume&#39;</span><span class="p">:</span> <span class="n">volume</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_defaults</span><span class="p">()</span>
        <span class="n">remove_dead_volume</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">is_generic_filter_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_vessel</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to_vessel</span> <span class="o">=</span> <span class="n">filter_top_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_vessel</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_generic_filter_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">from_vessel</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">from_vessel</span> <span class="o">=</span> <span class="n">filter_bottom_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">from_vessel</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CMove</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">from_vessel</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">to_vessel</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">volume</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Transfer </span><span class="si">{self.volume}</span><span class="s1"> mL to </span><span class="si">{self.to_vessel}</span><span class="s1">.&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">from_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;from_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@from_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">from_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;from_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">to_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;to_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@to_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">to_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;to_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">volume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;volume&#39;</span><span class="p">]</span>

    <span class="nd">@volume</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">volume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;volume&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="WashFilterCake"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.WashFilterCake">[docs]</a><span class="k">class</span> <span class="nc">WashFilterCake</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Wash filter cake with given volume of given solvent.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        filter_vessel {str} -- Filter vessel name to wash.</span>
<span class="sd">        solvent {str} -- Solvent to wash with.</span>
<span class="sd">        volume {float} -- Volume of solvent to wash with. (optional)</span>
<span class="sd">        wait_time {str} -- Time to wait after moving solvent to filter flask. (optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">solvent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="n">waste_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">wait_time</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;WashFilterCake&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;solvent&#39;</span><span class="p">:</span> <span class="n">solvent</span><span class="p">,</span>
            <span class="s1">&#39;filter_vessel&#39;</span><span class="p">:</span> <span class="n">filter_vessel</span><span class="p">,</span>
            <span class="s1">&#39;volume&#39;</span><span class="p">:</span> <span class="n">volume</span><span class="p">,</span>
            <span class="s1">&#39;waste_vessel&#39;</span><span class="p">:</span> <span class="n">waste_vessel</span><span class="p">,</span> <span class="c1"># should be set in prepare_for_execution</span>
            <span class="s1">&#39;wait_time&#39;</span><span class="p">:</span> <span class="n">wait_time</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_defaults</span><span class="p">()</span>

        <span class="n">filter_top</span> <span class="o">=</span> <span class="n">filter_top_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_vessel</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">Add</span><span class="p">(</span><span class="n">reagent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">solvent</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">volume</span><span class="p">,</span>
                <span class="n">vessel</span><span class="o">=</span><span class="n">filter_top</span><span class="p">,</span> <span class="n">waste_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">),</span>
            <span class="n">StirAtRT</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">filter_top</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="mi">60</span><span class="p">),</span>
            <span class="n">CMove</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">filter_bottom_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_vessel</span><span class="p">),</span> <span class="n">to_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">,</span>
                 <span class="n">volume</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">aspiration_speed</span><span class="o">=</span><span class="n">DEFAULT_FILTER_ASPIRATION_SPEED</span><span class="p">),</span>

            <span class="n">CMove</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">f</span><span class="s1">&#39;{filter_bottom_name(self.filter_vessel)}&#39;</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">,</span>
                 <span class="n">volume</span><span class="o">=</span><span class="n">DEFAULT_WASHFILTERCAKE_WAIT_TIME</span><span class="p">,</span> <span class="n">aspiration_speed</span><span class="o">=</span><span class="n">DEFAULT_FILTER_ASPIRATION_SPEED</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Wash </span><span class="si">{filter_vessel}</span><span class="s1"> with </span><span class="si">{solvent}</span><span class="s1"> (</span><span class="si">{volume}</span><span class="s1"> mL).&#39;</span>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">solvent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solvent&#39;</span><span class="p">]</span>

    <span class="nd">@solvent</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">solvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solvent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filter_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;filter_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@filter_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">filter_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;filter_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">volume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;volume&#39;</span><span class="p">]</span>

    <span class="nd">@volume</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">volume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;volume&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">waste_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@waste_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">waste_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">wait_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;wait_time&#39;</span><span class="p">]</span>

    <span class="nd">@wait_time</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">wait_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;wait_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="Dry"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.Dry">[docs]</a><span class="k">class</span> <span class="nc">Dry</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Dry given vessel by applying vacuum for given time.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        vessel {str} -- Vessel name to dry.</span>
<span class="sd">        time {str} -- Time to dry vessel for in seconds. (optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">waste_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Dry&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;filter_vessel&#39;</span><span class="p">:</span> <span class="n">filter_vessel</span><span class="p">,</span>
            <span class="s1">&#39;waste_vessel&#39;</span><span class="p">:</span> <span class="n">waste_vessel</span><span class="p">,</span> <span class="c1"># set in prepare_for_execution</span>
            <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">time</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_defaults</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">is_generic_filter_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_vessel</span><span class="p">):</span>
            <span class="n">filter_vessel_bottom</span> <span class="o">=</span> <span class="n">filter_bottom_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_vessel</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">filter_vessel_bottom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_vessel</span>

        <span class="n">volume</span> <span class="o">=</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span><span class="p">)</span> <span class="o">*</span> <span class="n">DEFAULT_FILTER_ASPIRATION_SPEED</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">CMove</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">filter_vessel_bottom</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="n">volume</span><span class="p">,</span> <span class="n">aspiration_speed</span><span class="o">=</span><span class="n">DEFAULT_FILTER_ASPIRATION_SPEED</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Dry substance in </span><span class="si">{self.filter_vessel}</span><span class="s1"> for </span><span class="si">{self.time}</span><span class="s1"> s.&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filter_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;filter_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@filter_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">filter_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;filter_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">waste_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@waste_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">waste_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span>

    <span class="nd">@time</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="Filter"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.Filter">[docs]</a><span class="k">class</span> <span class="nc">Filter</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Filter contents of filter_vessel_top. Apply vacuum for given time.</span>
<span class="sd">    Assumes filter_filter_bottom already filled with solvent and stuff already in filter_vessel_top.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        filter_vessel {str} -- Filter vessel.</span>
<span class="sd">        filter_top_volume {float} -- Volume (mL) of contents of filter top.</span>
<span class="sd">        filter_bottom_volume {float} -- Volume (mL) of the filter bottom.</span>
<span class="sd">        waste_vessel {float} -- Node to move waste material to.</span>
<span class="sd">        time {str} -- Time to leave vacuum on filter vessel after contents have been moved. (optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filter_top_volume</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filter_bottom_volume</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">waste_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">time</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Filter&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;filter_vessel&#39;</span><span class="p">:</span> <span class="n">filter_vessel</span><span class="p">,</span>
            <span class="s1">&#39;filter_top_volume&#39;</span><span class="p">:</span> <span class="n">filter_top_volume</span><span class="p">,</span> <span class="c1"># Filled in when XDL.prepare_for_execution is called</span>
            <span class="s1">&#39;filter_bottom_volume&#39;</span><span class="p">:</span> <span class="n">filter_bottom_volume</span><span class="p">,</span> <span class="c1"># Filled in when XDL.prepare_for_execution is called</span>
            <span class="s1">&#39;waste_vessel&#39;</span><span class="p">:</span> <span class="n">waste_vessel</span><span class="p">,</span>
            <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">time</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_defaults</span><span class="p">()</span>

        <span class="n">filter_bottom</span> <span class="o">=</span> <span class="n">filter_bottom_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_vessel</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">CMove</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">filter_bottom</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_top_volume</span><span class="p">,</span> <span class="n">aspiration_speed</span><span class="o">=</span><span class="n">DEFAULT_FILTER_ASPIRATION_SPEED</span><span class="p">),</span>
            <span class="n">CMove</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">filter_bottom</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_bottom_volume</span><span class="p">,</span> <span class="n">aspiration_speed</span><span class="o">=</span><span class="n">DEFAULT_FILTER_ASPIRATION_SPEED</span><span class="p">),</span>
            <span class="n">CMove</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">filter_bottom</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="n">DEFAULT_FILTER_MOVE_VOLUME</span><span class="p">,</span> <span class="n">aspiration_speed</span><span class="o">=</span><span class="n">DEFAULT_FILTER_ASPIRATION_SPEED</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Filter contents of </span><span class="si">{filter_vessel}</span><span class="s1"> for </span><span class="si">{time}</span><span class="s1"> s.&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filter_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;filter_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@filter_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">filter_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;filter_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filter_top_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;filter_top_volume&#39;</span><span class="p">]</span>

    <span class="nd">@filter_top_volume</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">filter_top_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;filter_top_volume&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filter_bottom_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;filter_bottom_volume&#39;</span><span class="p">]</span>

    <span class="nd">@filter_bottom_volume</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">filter_bottom_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;filter_bottom_volume&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">waste_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@waste_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">waste_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span>

    <span class="nd">@time</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="Confirm"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.Confirm">[docs]</a><span class="k">class</span> <span class="nc">Confirm</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the user to confirm something before execution continues.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        msg {str} -- Message to get user to confirm experiment should continue.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Confirm&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;msg&#39;</span><span class="p">:</span> <span class="n">msg</span><span class="p">,</span>
        <span class="p">}</span>

<div class="viewcode-block" id="Confirm.execute"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.Confirm.execute">[docs]</a>    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">chempiler</span><span class="p">):</span>
        <span class="n">keep_going</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">keep_going</span> <span class="ow">or</span> <span class="n">keep_going</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">msg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;msg&#39;</span><span class="p">]</span>

    <span class="nd">@msg</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">msg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;msg&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="MakeSolution"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.MakeSolution">[docs]</a><span class="k">class</span> <span class="nc">MakeSolution</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make solution in given vessel of given solutes in given solvent.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        solute {str or list} -- Solute(s).</span>
<span class="sd">        solvent {str} -- Solvent.</span>
<span class="sd">        solute_mass {str or list} -- Mass(es) corresponding to solute(s)</span>
<span class="sd">        solvent_volume {float} -- Volume of solvent to use in mL.</span>
<span class="sd">        vessel {str} -- Vessel name to make solution in.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solutes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">solvent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">solute_masses</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">solvent_volume</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;MakeSolution&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;solutes&#39;</span><span class="p">:</span> <span class="n">solutes</span><span class="p">,</span>
            <span class="s1">&#39;solvent&#39;</span><span class="p">:</span> <span class="n">solvent</span><span class="p">,</span>
            <span class="s1">&#39;solute_masses&#39;</span><span class="p">:</span> <span class="n">solute_masses</span><span class="p">,</span>
            <span class="s1">&#39;solvent_volume&#39;</span><span class="p">:</span> <span class="n">solvent_volume</span><span class="p">,</span>
            <span class="s1">&#39;vessel&#39;</span><span class="p">:</span> <span class="n">vessel</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">solutes</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">solutes</span> <span class="o">=</span> <span class="p">[</span><span class="n">solutes</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">solute_masses</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">solute_masses</span> <span class="o">=</span> <span class="p">[</span><span class="n">solute_masses</span><span class="p">]</span>
        <span class="n">check_str</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Are the following reagents in </span><span class="si">{vessel}</span><span class="s1">? (y)/n</span><span class="se">\n\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">solute</span><span class="p">,</span> <span class="n">mass</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">solutes</span><span class="p">,</span> <span class="n">solute_masses</span><span class="p">):</span>
            <span class="n">check_str</span> <span class="o">+=</span> <span class="n">f</span><span class="s1">&#39;</span><span class="si">{solute}</span><span class="s1"> (</span><span class="si">{mass}</span><span class="s1"> g)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Confirm</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="n">check_str</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Add</span><span class="p">(</span><span class="n">reagent</span><span class="o">=</span><span class="n">solvent</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="n">solvent_volume</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Make solution of &#39;</span>
        <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">solutes</span><span class="p">,</span> <span class="n">solute_masses</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">+=</span> <span class="n">f</span><span class="s1">&#39;</span><span class="si">{s}</span><span class="s1"> (</span><span class="si">{m}</span><span class="s1"> g), &#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">f</span><span class="s1">&#39; in </span><span class="si">{solvent}</span><span class="s1"> (</span><span class="si">{solvent_volume}</span><span class="s1"> mL) in </span><span class="si">{vessel}</span><span class="s1">.&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">solutes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solutes&#39;</span><span class="p">]</span>

    <span class="nd">@solutes</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">solutes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solutes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">solvent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solvent&#39;</span><span class="p">]</span>

    <span class="nd">@solvent</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">solvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solvent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">solute_masses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solute_masses&#39;</span><span class="p">]</span>

    <span class="nd">@solute_masses</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">solute_masses</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solute_masses&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">solvent_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solvent_volume&#39;</span><span class="p">]</span>

    <span class="nd">@solvent_volume</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">solvent_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solvent_volume&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span>

    <span class="nd">@vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="Reflux"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.Reflux">[docs]</a><span class="k">class</span> <span class="nc">Reflux</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reflux given vessel at given temperature for given time.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        vessel {str} -- Vessel to heat to reflux.</span>
<span class="sd">        temp {float} -- Temperature to heat vessel to in °C.</span>
<span class="sd">        time {int} -- Time to reflux vessel for in seconds.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">temp</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Reflux&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;vessel&#39;</span><span class="p">:</span> <span class="n">vessel</span><span class="p">,</span>
            <span class="s1">&#39;temp&#39;</span><span class="p">:</span> <span class="n">temp</span><span class="p">,</span>
            <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">time</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">filter_vessel</span> <span class="o">=</span> <span class="n">vessel</span> <span class="ow">and</span> <span class="s1">&#39;filter&#39;</span> <span class="ow">in</span> <span class="n">vessel</span>
        <span class="k">if</span> <span class="n">is_generic_filter_name</span><span class="p">(</span><span class="n">vessel</span><span class="p">):</span>
            <span class="n">vessel</span> <span class="o">=</span> <span class="n">filter_top_name</span><span class="p">(</span><span class="n">vessel</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">filter_vessel</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Chill</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">,</span> <span class="n">temp</span><span class="o">=</span><span class="n">temp</span><span class="p">,))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">StartHeat</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">,</span> <span class="n">temp</span><span class="o">=</span><span class="n">temp</span><span class="p">),)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Wait</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">),)</span>
        <span class="k">if</span> <span class="n">filter_vessel</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">StopChiller</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CStopHeat</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">vessel</span><span class="p">),)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Heat </span><span class="si">{vessel}</span><span class="s1"> to </span><span class="si">{temp}</span><span class="s1"> °C and reflux for </span><span class="si">{time}</span><span class="s1"> s.&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span>

    <span class="nd">@vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">temp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;temp&#39;</span><span class="p">]</span>

    <span class="nd">@temp</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">temp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;temp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span>

    <span class="nd">@time</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="Rotavap"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.Rotavap">[docs]</a><span class="k">class</span> <span class="nc">Rotavap</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Rotavap contents of given vessel at given temp and given pressure for given time.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        vessel {str} -- Vessel with contents to be rotavapped.</span>
<span class="sd">        temp {float} -- Temperature to set rotary evaporator water bath to in °C.</span>
<span class="sd">        pressure {float} -- Pressure to set rotary evaporator vacuum to in mbar.</span>
<span class="sd">        time {int} -- Time to rotavap for in seconds.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">temp</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pressure</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Rotavap&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;vessel&#39;</span><span class="p">:</span> <span class="n">vessel</span><span class="p">,</span>
            <span class="s1">&#39;temp&#39;</span><span class="p">:</span> <span class="n">temp</span><span class="p">,</span>
            <span class="s1">&#39;pressure&#39;</span><span class="p">:</span> <span class="n">pressure</span><span class="p">,</span>
            <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">time</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_defaults</span><span class="p">()</span>

        <span class="c1"># Steps incomplete</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">CSwitchCartridge</span><span class="p">(</span><span class="s1">&#39;rotavap&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="n">CLiftArmDown</span><span class="p">(</span><span class="s1">&#39;rotavap&#39;</span><span class="p">),</span>
            <span class="n">CSetRvRotationSpeed</span><span class="p">(</span><span class="s1">&#39;rotavap&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">),</span>
            <span class="n">CStartRotation</span><span class="p">(</span><span class="s1">&#39;rotavap&#39;</span><span class="p">),</span>
            <span class="n">CSetVacSp</span><span class="p">(</span><span class="s1">&#39;rotavap&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">),</span>
            <span class="n">StartVacuum</span><span class="p">(</span><span class="s1">&#39;rotavap&#39;</span><span class="p">),</span>
            <span class="n">CSetBathTemp</span><span class="p">(</span><span class="s1">&#39;rotavap&#39;</span><span class="p">,</span> <span class="n">temp</span><span class="p">),</span>
            <span class="n">CStartHeaterBath</span><span class="p">(</span><span class="s1">&#39;rotavap&#39;</span><span class="p">),</span>
            <span class="n">Wait</span><span class="p">(</span><span class="mi">300</span><span class="p">),</span>
            <span class="n">CSetVacSp</span><span class="p">(</span><span class="s1">&#39;rotavap&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">),</span>
            <span class="n">Wait</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time</span><span class="p">),</span>
            <span class="n">StopVacuum</span><span class="p">(</span><span class="s1">&#39;rotavap&#39;</span><span class="p">),</span>
            <span class="n">CVentVac</span><span class="p">(</span><span class="s1">&#39;rotavap&#39;</span><span class="p">),</span>
            <span class="n">CMove</span><span class="p">(</span><span class="s1">&#39;flask_rv_bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;waste&#39;</span><span class="p">,</span> <span class="p">)</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Rotavap contents of </span><span class="si">{vessel}</span><span class="s1"> at </span><span class="si">{temp}</span><span class="s1"> °C for </span><span class="si">{time}</span><span class="s1">.&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span>

    <span class="nd">@vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">temp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;temp&#39;</span><span class="p">]</span>

    <span class="nd">@temp</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">temp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;temp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pressure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;pressure&#39;</span><span class="p">]</span>

    <span class="nd">@pressure</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">pressure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;pressure&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span>

    <span class="nd">@time</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="Wait"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.Wait">[docs]</a><span class="k">class</span> <span class="nc">Wait</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Wait for given time.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        time {int} -- Time in seconds</span>
<span class="sd">        wait_recording_speed {int} -- Recording speed during wait (faster) ~2000</span>
<span class="sd">        after_recording_speed {int} -- Recording speed after wait (slower) ~14</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wait_recording_speed</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="n">after_recording_speed</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Wait&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">time</span><span class="p">,</span>
            <span class="s1">&#39;wait_recording_speed&#39;</span><span class="p">:</span> <span class="n">wait_recording_speed</span><span class="p">,</span>
            <span class="s1">&#39;after_recording_speed&#39;</span><span class="p">:</span> <span class="n">after_recording_speed</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_defaults</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">CSetRecordingSpeed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wait_recording_speed</span><span class="p">),</span>
            <span class="n">CWait</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time</span><span class="p">),</span>
            <span class="n">CSetRecordingSpeed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">after_recording_speed</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Wait for </span><span class="si">{self.time}</span><span class="s1"> s.&#39;</span>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span>

    <span class="nd">@time</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">wait_recording_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;wait_recording_speed&#39;</span><span class="p">]</span>

    <span class="nd">@wait_recording_speed</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">wait_recording_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;wait_recording_speed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">after_recording_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;after_recording_speed&#39;</span><span class="p">]</span>

    <span class="nd">@after_recording_speed</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">after_recording_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;after_recording_speed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="Extract"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.Extract">[docs]</a><span class="k">class</span> <span class="nc">Extract</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Extract contents of from_vessel using given amount of given solvent.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        from_vessel {str} -- Vessel name with contents to be extracted.</span>
<span class="sd">        separation_vessel {str} -- Separation vessel name.</span>
<span class="sd">        solvent {str} -- Solvent to extract with.</span>
<span class="sd">        solvent_volume {float} -- Volume of solvent to extract with.</span>
<span class="sd">        n_separations {int} -- Number of separations to perform.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">separation_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">solvent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">solvent_volume</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">n_extractions</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">product_bottom</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">waste_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">waste_phase_to_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filter_dead_volume</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Extract&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;from_vessel&#39;</span><span class="p">:</span> <span class="n">from_vessel</span><span class="p">,</span>
            <span class="s1">&#39;separation_vessel&#39;</span><span class="p">:</span> <span class="n">separation_vessel</span><span class="p">,</span>
            <span class="s1">&#39;to_vessel&#39;</span><span class="p">:</span> <span class="n">to_vessel</span><span class="p">,</span>
            <span class="s1">&#39;solvent&#39;</span><span class="p">:</span> <span class="n">solvent</span><span class="p">,</span>
            <span class="s1">&#39;solvent_volume&#39;</span><span class="p">:</span> <span class="n">solvent_volume</span><span class="p">,</span>
            <span class="s1">&#39;n_extractions&#39;</span><span class="p">:</span> <span class="n">n_extractions</span><span class="p">,</span>
            <span class="s1">&#39;product_bottom&#39;</span><span class="p">:</span> <span class="n">product_bottom</span><span class="p">,</span>
            <span class="s1">&#39;waste_phase_to_vessel&#39;</span><span class="p">:</span> <span class="n">waste_phase_to_vessel</span><span class="p">,</span>
            <span class="s1">&#39;waste_vessel&#39;</span><span class="p">:</span> <span class="n">waste_vessel</span><span class="p">,</span> <span class="c1"># set in prepare_for_execution</span>
            <span class="s1">&#39;filter_dead_volume&#39;</span><span class="p">:</span> <span class="n">filter_dead_volume</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">to_vessel</span> <span class="ow">and</span> <span class="n">from_vessel</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to_vessel</span> <span class="o">=</span> <span class="n">from_vessel</span> <span class="c1"># is necessary to set self.to_vessel here not just to_vessel</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">waste_phase_to_vessel</span> <span class="ow">and</span> <span class="n">waste_vessel</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">waste_phase_to_vessel</span> <span class="o">=</span> <span class="n">waste_vessel</span>

        <span class="k">if</span> <span class="n">is_generic_filter_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_vessel</span><span class="p">):</span>
            <span class="n">to_vessel</span> <span class="o">=</span> <span class="n">filter_top_name</span><span class="p">(</span><span class="n">to_vessel</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_generic_filter_name</span><span class="p">(</span><span class="n">from_vessel</span><span class="p">):</span>
            <span class="n">from_vessel</span> <span class="o">=</span> <span class="n">filter_bottom_name</span><span class="p">(</span><span class="n">from_vessel</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_generic_separator_name</span><span class="p">(</span><span class="n">waste_phase_to_vessel</span><span class="p">):</span>
            <span class="n">waste_phase_to_vessel</span> <span class="o">=</span> <span class="n">separator_top_name</span><span class="p">(</span><span class="n">waste_phase_to_vessel</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">is_generic_filter_name</span><span class="p">(</span><span class="n">waste_phase_to_vessel</span><span class="p">):</span>
            <span class="n">waste_phase_to_vessel</span> <span class="o">=</span> <span class="n">filter_top_name</span><span class="p">(</span><span class="n">waste_phase_to_vessel</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">get_defaults</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_extractions</span><span class="p">:</span>
            <span class="n">n_extractions</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">n_extractions</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n_extractions</span><span class="p">)</span>

        <span class="n">separator_top</span> <span class="o">=</span> <span class="n">separator_top_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">separation_vessel</span><span class="p">)</span>
        <span class="n">separator_bottom</span> <span class="o">=</span> <span class="n">separator_bottom_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">separation_vessel</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
                <span class="c1"># Move from from_vessel to separation_vessel</span>
                <span class="n">Transfer</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">from_vessel</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">),</span>
                <span class="c1"># Move solvent to separation_vessel.</span>
                <span class="n">Add</span><span class="p">(</span><span class="n">reagent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">solvent</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">solvent_volume</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">waste_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">),</span>
                <span class="c1"># Stir separation_vessel</span>
                <span class="n">StirAtRT</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_FAST_STIR_TIME</span><span class="p">,</span> <span class="n">stir_rpm</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_FAST_STIR_RPM</span><span class="p">),</span>
                <span class="n">StirAtRT</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_SLOW_STIR_TIME</span><span class="p">,</span> <span class="n">stir_rpm</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_SLOW_STIR_RPM</span><span class="p">),</span>
                <span class="c1"># Wait for phases to separate</span>
                <span class="n">Wait</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_SETTLE_TIME</span><span class="p">),</span>
            <span class="p">])</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">from_vessel</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">separation_vessel</span><span class="p">,</span> <span class="n">separator_top</span><span class="p">,</span> <span class="n">separator_bottom</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">remove_volume</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="c1"># If product in bottom phase</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">product_bottom</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">n_extractions</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_extractions</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
                        <span class="n">Transfer</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="n">remove_volume</span><span class="p">),</span>
                        <span class="n">CSeparate</span><span class="p">(</span><span class="n">lower_phase_vessel</span><span class="o">=</span><span class="n">to_vessel</span><span class="p">,</span> <span class="n">upper_phase_vessel</span><span class="o">=</span><span class="n">waste_phase_to_vessel</span><span class="p">,</span>
                            <span class="n">separator_top</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">separator_bottom</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">dead_volume_target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">),</span>
                        <span class="c1"># Move to_vessel to separation_vessel</span>
                        <span class="n">CMove</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">to_vessel</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">),</span>
                        <span class="c1"># Move solvent to separation_vessel. Bottom as washes any reagent from previous separation back into funnel.</span>
                        <span class="n">Add</span><span class="p">(</span><span class="n">reagent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">solvent</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">solvent_volume</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">waste_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">),</span>
                        <span class="c1"># Stir separation_vessel</span>
                        <span class="n">StirAtRT</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_FAST_STIR_TIME</span><span class="p">,</span> <span class="n">stir_rpm</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_FAST_STIR_RPM</span><span class="p">),</span>
                        <span class="n">StirAtRT</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_SLOW_STIR_TIME</span><span class="p">,</span> <span class="n">stir_rpm</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_SLOW_STIR_RPM</span><span class="p">),</span>
                        <span class="c1"># Wait for phases to separate</span>
                        <span class="n">Wait</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_SETTLE_TIME</span><span class="p">),</span>
                    <span class="p">])</span>


            <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
                <span class="n">Transfer</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="n">remove_volume</span><span class="p">),</span>
                <span class="n">CSeparate</span><span class="p">(</span><span class="n">lower_phase_vessel</span><span class="o">=</span><span class="n">to_vessel</span><span class="p">,</span> <span class="n">upper_phase_vessel</span><span class="o">=</span><span class="n">waste_phase_to_vessel</span><span class="p">,</span>
                            <span class="n">separator_top</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">separator_bottom</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">dead_volume_target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">),</span>
            <span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">n_extractions</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_extractions</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
                        <span class="n">Transfer</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="n">remove_volume</span><span class="p">),</span>
                        <span class="n">CSeparate</span><span class="p">(</span><span class="n">lower_phase_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">,</span> <span class="n">upper_phase_vessel</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span>
                            <span class="n">separator_top</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">separator_bottom</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">dead_volume_target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">),</span>
                        <span class="c1"># Move solvent to separation_vessel</span>
                        <span class="n">Add</span><span class="p">(</span><span class="n">reagent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">solvent</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">solvent_volume</span><span class="p">,</span> <span class="n">waste_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">),</span>
                        <span class="c1"># Stir separation_vessel</span>
                        <span class="n">StirAtRT</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_FAST_STIR_TIME</span><span class="p">,</span> <span class="n">stir_rpm</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_FAST_STIR_RPM</span><span class="p">),</span>
                        <span class="n">StirAtRT</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_SLOW_STIR_TIME</span><span class="p">,</span> <span class="n">stir_rpm</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_SLOW_STIR_RPM</span><span class="p">),</span>
                        <span class="c1"># Wait for phases to separate</span>
                        <span class="n">Wait</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_SETTLE_TIME</span><span class="p">),</span>
                    <span class="p">])</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
                <span class="n">Transfer</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="n">remove_volume</span><span class="p">),</span>
                <span class="n">CSeparate</span><span class="p">(</span><span class="n">lower_phase_vessel</span><span class="o">=</span><span class="n">waste_phase_to_vessel</span><span class="p">,</span> <span class="n">upper_phase_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">to_vessel</span><span class="p">,</span>
                            <span class="n">separator_top</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">separator_bottom</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">dead_volume_target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">),</span>
            <span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Extract contents of </span><span class="si">{self.from_vessel}</span><span class="s1"> with </span><span class="si">{self.solvent}</span><span class="s1"> (</span><span class="si">{self.n_extractions}</span><span class="s1">x</span><span class="si">{self.solvent_volume}</span><span class="s1"> mL).&#39;</span>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">from_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;from_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@from_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">from_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;from_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">separation_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;separation_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@separation_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">separation_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;separation_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">to_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;to_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@to_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">to_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;to_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">solvent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solvent&#39;</span><span class="p">]</span>

    <span class="nd">@solvent</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">solvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solvent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">solvent_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solvent_volume&#39;</span><span class="p">]</span>

    <span class="nd">@solvent_volume</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">solvent_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solvent_volume&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">n_extractions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;n_extractions&#39;</span><span class="p">]</span>

    <span class="nd">@n_extractions</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">n_extractions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;n_extractions&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">product_bottom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;product_bottom&#39;</span><span class="p">]</span>

    <span class="nd">@product_bottom</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">product_bottom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;product_bottom&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">waste_phase_to_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_phase_to_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@waste_phase_to_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">waste_phase_to_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_phase_to_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">waste_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@waste_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">waste_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filter_dead_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;filter_dead_volume&#39;</span><span class="p">]</span>

    <span class="nd">@filter_dead_volume</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">filter_dead_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;filter_dead_volume&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="Wash"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.Wash">[docs]</a><span class="k">class</span> <span class="nc">Wash</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Wash contents of from_vessel with given solvent.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        from_vessel {str} -- Vessel with contents to be washed.</span>
<span class="sd">        separation_vessel {str} -- Separating funnel name.</span>
<span class="sd">        to_vessel {str} -- Vessel to put washed product after separation.</span>
<span class="sd">        solvent {str} -- Solvent to wash with.</span>
<span class="sd">        solvent_volume {float} -- Volume of solvent to wash with.</span>
<span class="sd">        n_washes {int} -- Number of washes to perform.</span>
<span class="sd">        product_bottom {bool} -- True if product is in bottom phase.</span>
<span class="sd">        waste_vessel {str} -- Vessel to put waste material.</span>
<span class="sd">        waste_phase_to_vessel {str} -- Vessel to put the phase that doesn&#39;t have the product.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">separation_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">solvent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">solvent_volume</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">n_washes</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">product_bottom</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">waste_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">waste_phase_to_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filter_dead_volume</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Wash&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;from_vessel&#39;</span><span class="p">:</span> <span class="n">from_vessel</span><span class="p">,</span>
            <span class="s1">&#39;to_vessel&#39;</span><span class="p">:</span> <span class="n">to_vessel</span><span class="p">,</span>
            <span class="s1">&#39;separation_vessel&#39;</span><span class="p">:</span> <span class="n">separation_vessel</span><span class="p">,</span>
            <span class="s1">&#39;solvent&#39;</span><span class="p">:</span> <span class="n">solvent</span><span class="p">,</span>
            <span class="s1">&#39;solvent_volume&#39;</span><span class="p">:</span> <span class="n">solvent_volume</span><span class="p">,</span>
            <span class="s1">&#39;n_washes&#39;</span><span class="p">:</span> <span class="n">n_washes</span><span class="p">,</span>
            <span class="s1">&#39;product_bottom&#39;</span><span class="p">:</span> <span class="n">product_bottom</span><span class="p">,</span>
            <span class="s1">&#39;waste_phase_to_vessel&#39;</span><span class="p">:</span> <span class="n">waste_phase_to_vessel</span><span class="p">,</span>
            <span class="s1">&#39;waste_vessel&#39;</span><span class="p">:</span> <span class="n">waste_vessel</span><span class="p">,</span>
            <span class="s1">&#39;filter_dead_volume&#39;</span><span class="p">:</span> <span class="n">filter_dead_volume</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_defaults</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">waste_phase_to_vessel</span> <span class="ow">and</span> <span class="n">waste_vessel</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">waste_phase_to_vessel</span> <span class="o">=</span> <span class="n">waste_vessel</span>

        <span class="k">if</span> <span class="n">is_generic_filter_name</span><span class="p">(</span><span class="n">to_vessel</span><span class="p">):</span>
            <span class="n">to_vessel</span> <span class="o">=</span> <span class="n">filter_top_name</span><span class="p">(</span><span class="n">to_vessel</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_generic_filter_name</span><span class="p">(</span><span class="n">from_vessel</span><span class="p">):</span>
            <span class="n">from_vessel</span> <span class="o">=</span> <span class="n">filter_bottom_name</span><span class="p">(</span><span class="n">from_vessel</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_generic_separator_name</span><span class="p">(</span><span class="n">waste_phase_to_vessel</span><span class="p">):</span>
            <span class="n">waste_phase_to_vessel</span> <span class="o">=</span> <span class="n">separator_top_name</span><span class="p">(</span><span class="n">waste_phase_to_vessel</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">is_generic_filter_name</span><span class="p">(</span><span class="n">waste_phase_to_vessel</span><span class="p">):</span>
            <span class="n">waste_phase_to_vessel</span> <span class="o">=</span> <span class="n">filter_top_name</span><span class="p">(</span><span class="n">waste_phase_to_vessel</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">n_washes</span><span class="p">:</span>
            <span class="n">n_washes</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">n_washes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n_washes</span><span class="p">)</span>

        <span class="n">remove_volume</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="n">separator_top</span> <span class="o">=</span> <span class="n">separator_top_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">separation_vessel</span><span class="p">)</span>
        <span class="n">separator_bottom</span> <span class="o">=</span> <span class="n">separator_bottom_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">separation_vessel</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
            <span class="c1"># Move from from_vessel to separation_vessel</span>
            <span class="n">Transfer</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">from_vessel</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">),</span>
            <span class="c1"># Move solvent to separation_vessel</span>
            <span class="n">Add</span><span class="p">(</span><span class="n">reagent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">solvent</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">solvent_volume</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">waste_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">),</span>
            <span class="c1"># Stir separation_vessel</span>
            <span class="n">StirAtRT</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_FAST_STIR_TIME</span><span class="p">,</span> <span class="n">stir_rpm</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_FAST_STIR_RPM</span><span class="p">),</span>
            <span class="n">StirAtRT</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_SLOW_STIR_TIME</span><span class="p">,</span> <span class="n">stir_rpm</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_SLOW_STIR_RPM</span><span class="p">),</span>
            <span class="c1"># Wait for phases to separate</span>
            <span class="n">Wait</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_SETTLE_TIME</span><span class="p">),</span>
        <span class="p">])</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">from_vessel</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">separation_vessel</span><span class="p">,</span> <span class="n">separator_top</span><span class="p">,</span> <span class="n">separator_bottom</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">product_bottom</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">n_washes</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_washes</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
                        <span class="c1"># Move first 2 mL of product phase to waste just in case of contamination.</span>
                        <span class="n">Transfer</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="n">remove_volume</span><span class="p">),</span>
                        <span class="n">CSeparate</span><span class="p">(</span><span class="n">lower_phase_vessel</span><span class="o">=</span><span class="n">to_vessel</span><span class="p">,</span> <span class="n">upper_phase_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_phase_to_vessel</span><span class="p">,</span>
                            <span class="n">separator_top</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">separator_bottom</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">dead_volume_target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">),</span>
                        <span class="c1"># Move to_vessel to separation_vessel</span>
                        <span class="n">Transfer</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">to_vessel</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">),</span>
                        <span class="c1"># Move solvent to separation_vessel. Bottom as washes any reagent from previous separation back into funnel.</span>
                        <span class="n">Add</span><span class="p">(</span><span class="n">reagent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">solvent</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">solvent_volume</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">waste_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">),</span>
                        <span class="c1"># Stir separation_vessel</span>
                        <span class="n">StirAtRT</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_FAST_STIR_TIME</span><span class="p">,</span> <span class="n">stir_rpm</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_FAST_STIR_RPM</span><span class="p">),</span>
                        <span class="n">StirAtRT</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_SLOW_STIR_TIME</span><span class="p">,</span> <span class="n">stir_rpm</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_SLOW_STIR_RPM</span><span class="p">),</span>
                        <span class="c1"># Wait for phases to separate</span>
                        <span class="n">Wait</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_SETTLE_TIME</span><span class="p">),</span>
                    <span class="p">])</span>
            <span class="n">remove_volume</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
                <span class="n">Transfer</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="n">remove_volume</span><span class="p">),</span>
                <span class="c1"># Do separation</span>
                <span class="n">CSeparate</span><span class="p">(</span><span class="n">lower_phase_vessel</span><span class="o">=</span><span class="n">to_vessel</span><span class="p">,</span> <span class="n">upper_phase_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_phase_to_vessel</span><span class="p">,</span>
                            <span class="n">separator_top</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">separator_bottom</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">),</span>
            <span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">n_washes</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_washes</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
                        <span class="n">Transfer</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="n">remove_volume</span><span class="p">),</span>
                        <span class="n">CSeparate</span><span class="p">(</span><span class="n">lower_phase_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_phase_to_vessel</span><span class="p">,</span> <span class="n">upper_phase_vessel</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span>
                            <span class="n">separator_top</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">separator_bottom</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">dead_volume_target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">),</span>
                        <span class="c1"># Move solvent to separation_vessel</span>
                        <span class="n">Add</span><span class="p">(</span><span class="n">reagent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">solvent</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">solvent_volume</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">waste_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">),</span>
                        <span class="c1"># Stir separation_vessel</span>
                        <span class="n">StirAtRT</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_FAST_STIR_TIME</span><span class="p">,</span> <span class="n">stir_rpm</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_FAST_STIR_RPM</span><span class="p">),</span>
                        <span class="n">StirAtRT</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_SLOW_STIR_TIME</span><span class="p">,</span> <span class="n">stir_rpm</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_SLOW_STIR_RPM</span><span class="p">),</span>
                        <span class="c1"># Wait for phases to separate</span>
                        <span class="n">Wait</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">DEFAULT_SEPARATION_SETTLE_TIME</span><span class="p">),</span>
                    <span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
                <span class="n">Transfer</span><span class="p">(</span><span class="n">from_vessel</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">to_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="n">remove_volume</span><span class="p">),</span>
                <span class="c1"># Do separation</span>
                <span class="n">CSeparate</span><span class="p">(</span><span class="n">lower_phase_vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_phase_to_vessel</span><span class="p">,</span> <span class="n">upper_phase_vessel</span><span class="o">=</span><span class="n">to_vessel</span><span class="p">,</span>
                            <span class="n">separator_top</span><span class="o">=</span><span class="n">separator_top</span><span class="p">,</span> <span class="n">separator_bottom</span><span class="o">=</span><span class="n">separator_bottom</span><span class="p">,</span> <span class="n">dead_volume_target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waste_vessel</span><span class="p">),</span>
            <span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Wash contents of </span><span class="si">{from_vessel}</span><span class="s1"> in </span><span class="si">{separation_vessel}</span><span class="s1"> with </span><span class="si">{solvent}</span><span class="s1"> (</span><span class="si">{n_washes}</span><span class="s1">x</span><span class="si">{solvent_volume}</span><span class="s1"> mL)&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">from_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;from_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@from_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">from_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;from_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">to_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;to_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@to_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">to_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;to_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">separation_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;separation_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@separation_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">separation_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;separation_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">solvent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solvent&#39;</span><span class="p">]</span>

    <span class="nd">@solvent</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">solvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solvent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">solvent_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solvent_volume&#39;</span><span class="p">]</span>

    <span class="nd">@solvent_volume</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">solvent_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solvent_volume&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">n_washes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;n_washes&#39;</span><span class="p">]</span>

    <span class="nd">@n_washes</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">n_washes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;n_washes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">product_bottom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;product_bottom&#39;</span><span class="p">]</span>

    <span class="nd">@product_bottom</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">product_bottom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;product_bottom&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">waste_phase_to_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_phase_to_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@waste_phase_to_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">waste_phase_to_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_phase_to_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">waste_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@waste_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">waste_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filter_dead_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;filter_dead_volume&#39;</span><span class="p">]</span>

    <span class="nd">@filter_dead_volume</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">filter_dead_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;filter_dead_volume&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="StirAtRT"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.StirAtRT">[docs]</a><span class="k">class</span> <span class="nc">StirAtRT</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Stir given vessel for given time at room temperature.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        vessel {str} -- Vessel to stir.</span>
<span class="sd">        time {float} -- Time to stir for.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stir_rpm</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;StirAtRT&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;vessel&#39;</span><span class="p">:</span> <span class="n">vessel</span><span class="p">,</span>
            <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">time</span><span class="p">,</span>
            <span class="s1">&#39;stir_rpm&#39;</span><span class="p">:</span> <span class="n">stir_rpm</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">get_defaults</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">StartStir</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">vessel</span><span class="p">,</span> <span class="n">stir_rpm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stir_rpm</span><span class="p">),</span>
            <span class="n">Wait</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">time</span><span class="p">),</span>
            <span class="n">CStopStir</span><span class="p">(</span><span class="n">vessel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">vessel</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Stir </span><span class="si">{vessel}</span><span class="s1"> for </span><span class="si">{time}</span><span class="s1"> s.&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span>

    <span class="nd">@vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span>

    <span class="nd">@time</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">stir_rpm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;stir_rpm&#39;</span><span class="p">]</span>

    <span class="nd">@stir_rpm</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">stir_rpm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;stir_rpm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="PrepareFilter"><a class="viewcode-back" href="../../../steps.html#xdllib.steps.steps_xdl.PrepareFilter">[docs]</a><span class="k">class</span> <span class="nc">PrepareFilter</span><span class="p">(</span><span class="n">Step</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Fill bottom of filter vessel with solvent in anticipation of the filter top being used.</span>

<span class="sd">    Keyword Arguments:</span>
<span class="sd">        filter_vessel {str} -- Filter vessel name to prepare (generic name &#39;filter&#39; not &#39;filter_filter_bottom&#39;).</span>
<span class="sd">        solvent {str} -- Solvent to fill filter bottom with.</span>
<span class="sd">        volume {int} -- Volume of filter bottom.</span>
<span class="sd">        waste_vessel {str} -- Vessel to put waste material.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">solvent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">waste_vessel</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;PrepareFilter&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;filter_vessel&#39;</span><span class="p">:</span> <span class="n">filter_vessel</span><span class="p">,</span>
            <span class="s1">&#39;solvent&#39;</span><span class="p">:</span> <span class="n">solvent</span><span class="p">,</span>
            <span class="s1">&#39;volume&#39;</span><span class="p">:</span> <span class="n">volume</span><span class="p">,</span> <span class="c1"># This value should be replaced when XDL calls prepare_for_execution.</span>
            <span class="s1">&#39;waste_vessel&#39;</span><span class="p">:</span> <span class="n">waste_vessel</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">Add</span><span class="p">(</span><span class="n">reagent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">solvent</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">volume</span><span class="p">,</span>
                <span class="n">vessel</span><span class="o">=</span><span class="n">filter_bottom_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_vessel</span><span class="p">),</span> <span class="n">waste_vessel</span><span class="o">=</span><span class="n">waste_vessel</span><span class="p">,)</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_readable</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Fill {filter_bottom_name(self.filter_vessel)} with </span><span class="si">{solvent}</span><span class="s1"> (</span><span class="si">{volume}</span><span class="s1"> mL).&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filter_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;filter_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@filter_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">filter_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;filter_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">solvent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solvent&#39;</span><span class="p">]</span>

    <span class="nd">@solvent</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">solvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;solvent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">volume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;volume&#39;</span><span class="p">]</span>

    <span class="nd">@volume</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">volume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;volume&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">waste_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_vessel&#39;</span><span class="p">]</span>

    <span class="nd">@waste_vessel</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">waste_vessel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;waste_vessel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Matthew Craven.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
    </div>

    

    
  </body>
</html>